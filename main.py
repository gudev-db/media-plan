import streamlit as st
import pandas as pd
import google.generativeai as genai
import os
from typing import Dict, Any

# Configura√ß√£o inicial
st.set_page_config(
    layout="wide",
    page_title="IA de Planejamento de M√≠dia",
    page_icon="üìä"
)

# CSS personalizado
st.markdown("""
<style>
    .main {
        background-color: #f5f7fa;
    }
    .stTextInput input, .stSelectbox select, .stTextArea textarea {
        border-radius: 8px !important;
        border: 1px solid #d1d5db !important;
    }
    .stButton button {
        background-color: #4f46e5 !important;
        color: white !important;
        border-radius: 8px !important;
        padding: 10px 24px !important;
        font-weight: 500 !important;
    }
    .stButton button:hover {
        background-color: #4338ca !important;
    }
    .result-card {
        background-color: white;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    th, td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #e5e7eb;
    }
    th {
        background-color: #f9fafb;
        font-weight: 600;
    }
    .stTabs [aria-selected="true"] {
        color: #4f46e5 !important;
        font-weight: 600 !important;
    }
    .metric-row {
        display: flex;
        align-items: center;
        margin-bottom: 8px;
    }
    .metric-name {
        width: 200px;
        font-weight: 500;
    }
    .metric-input {
        flex-grow: 1;
    }
</style>
""", unsafe_allow_html=True)

# Inicializar Gemini
gemini_api_key = os.getenv("GEM_API_KEY")
genai.configure(api_key=gemini_api_key)
modelo_texto = genai.GenerativeModel("gemini-1.5-flash")

# T√≠tulo do aplicativo
st.title("üìä IA para Planejamento de M√≠dia")
st.markdown("""
**Crie planos de m√≠dia otimizados com aloca√ß√£o autom√°tica de verba por estrat√©gia, plataforma e localiza√ß√£o.**
""")

# Estado da sess√£o
if 'plano_completo' not in st.session_state:
    st.session_state.plano_completo = {}
if 'current_step' not in st.session_state:
    st.session_state.current_step = 0

# Dicion√°rios de m√©tricas por etapa do funil
METRICAS_POR_ETAPA = {
    'Topo': ['Impress√µes', 'Alcance', 'Custo', 'CPM', 'Cliques', 'CTR', 'Engajamentos', 'Frequ√™ncia'],
    'Meio': ['Impress√µes', 'Cliques', 'CTR', 'CPM', 'Custo', 'Engajamentos', 'Visualiza√ß√µes', 'ThruPlays'],
    'Fundo': ['Impress√µes', 'Cliques', 'Resultados', 'CTR', 'CPM', 'Custo por resultado', 'Custo']
}

DESCRICOES_METRICAS = {
    'Impress√µes': "N√∫mero total de vezes que seu an√∫ncio foi exibido",
    'Alcance': "N√∫mero de pessoas √∫nicas que viram seu an√∫ncio",
    'Custo': "Custo total da campanha",
    'CPM': "Custo por mil impress√µes",
    'Cliques': "N√∫mero total de cliques no an√∫ncio",
    'CTR': "Taxa de cliques (cliques/impress√µes)",
    'Engajamentos': "Intera√ß√µes com o an√∫ncio (curtidas, coment√°rios, compartilhamentos)",
    'Frequ√™ncia': "M√©dia de vezes que cada pessoa viu seu an√∫ncio",
    'Visualiza√ß√µes': "Visualiza√ß√µes do v√≠deo (3s ou mais)",
    'ThruPlays': "Visualiza√ß√µes completas do v√≠deo",
    'Resultados': "N√∫mero de convers√µes (compras, cadastros, etc.)",
    'Custo por resultado': "Custo m√©dio por convers√£o",
}

# Fun√ß√µes de gera√ß√£o de conte√∫do
def gerar_recomendacao_estrategica(params: Dict[str, Any]) -> str:
    """Gera a recomenda√ß√£o estrat√©gica inicial"""
    etapa_funil = params['etapa_funil']
    okrs_escolhidos = [k for k, v in params['metricas'].items() if v['selecionada']]
    metas_especificas = [f"{k}: {v['valor']}" for k, v in params['metricas'].items() if v['selecionada'] and v['valor']]

    prompt = f"""
    Como especialista em planejamento de m√≠dia digital, analise os seguintes par√¢metros e forne√ßa uma recomenda√ß√£o estrat√©gica:

    **Campanha:** {params['objetivo_campanha']} (Etapa do Funil: {etapa_funil})
    **Tipo de Campanha:** {params['tipo_campanha']}
    **Budget Total:** R$ {params['budget']:,.2f}
    **Per√≠odo da Campanha:** {params['periodo']}
    **Ferramentas/Plataformas:** {", ".join(params['ferramentas'])}
    **Localiza√ß√£o Prim√°ria:** {params['localizacao_primaria']}
    **Localiza√ß√£o Secund√°ria:** {params['localizacao_secundaria']}
    **Tipo de P√∫blico:** {params['tipo_publico']}
    **Tipos de Criativo:** {", ".join(params['tipo_criativo'])}
    **OKRs Escolhidos:** {", ".join(okrs_escolhidos) if okrs_escolhidos else "A serem definidos"}
    **Metas Espec√≠ficas:** {", ".join(metas_especificas) if metas_especificas else "Nenhuma meta espec√≠fica"}
    **Detalhes da A√ß√£o:** {params['detalhes_acao'] or "Nenhum"}
    **Observa√ß√µes:** {params['observacoes'] or "Nenhuma"}

    Forne√ßa:
    1. An√°lise estrat√©gica focada em {etapa_funil} do funil (150-200 palavras)
    2. Principais oportunidades para os OKRs selecionados
    3. Riscos potenciais espec√≠ficos para esta etapa
    4. Recomenda√ß√£o geral de abordagem

    Dicas:
    - Mantenha o foco absoluto nos OKRs selecionados: {", ".join(okrs_escolhidos) if okrs_escolhidos else "gerar sugest√µes apropriadas"}
    - Considere as metas espec√≠ficas quando fornecidas
    - Adapte ao per√≠odo especificado

    Formato: Markdown com headers (##, ###)
    """
    response = modelo_texto.generate_content(prompt)
    return response.text

def gerar_distribuicao_budget(params: Dict[str, Any], recomendacao_estrategica: str) -> str:
    """Gera a distribui√ß√£o de budget baseada na recomenda√ß√£o estrat√©gica"""
    etapa_funil = params['etapa_funil']
    okrs_escolhidos = [k for k, v in params['metricas'].items() if v['selecionada']]
    metas_especificas = [f"{k}: {v['valor']}" for k, v in params['metricas'].items() if v['selecionada'] and v['valor']]

    prompt = f"""
    Com base na seguinte recomenda√ß√£o estrat√©gica (Etapa {etapa_funil} do Funil):
    {recomendacao_estrategica}

    E nos par√¢metros originais:
    - Budget: R$ {params['budget']:,.2f}
    - Per√≠odo: {params['periodo']}
    - Plataformas: {", ".join(params['ferramentas'])}
    - Localiza√ß√µes: Prim√°ria ({params['localizacao_primaria']}), Secund√°ria ({params['localizacao_secundaria']})
    - Tipos de Criativo: {", ".join(params['tipo_criativo'])}
    - OKRs: {", ".join(okrs_escolhidos) if okrs_escolhidos else "A serem otimizados"}
    - Metas: {", ".join(metas_especificas) if metas_especificas else "Nenhuma espec√≠fica"}

    Crie uma tabela detalhada de distribui√ß√£o de budget OTIMIZADA PARA OS OKRs SELECIONADOS com:
    1. Divis√£o por plataforma (% e valor)
    2. Aloca√ß√£o geogr√°fica (prim√°ria vs secund√°ria)
    3. Tipos de criativos recomendados (APENAS: {", ".join(params['tipo_criativo'])})
    4. Justificativa estrat√©gica para cada aloca√ß√£o

    REGRAS:
    - Priorize os OKRs selecionados: {", ".join(okrs_escolhidos) if okrs_escolhidos else "otimize para a etapa do funil"}
    - Considere as metas espec√≠ficas quando fornecidas
    - N√£o sugerir criativos fora dos tipos especificados
    - Manter foco absoluto nos estados solicitados

    Inclua tamb√©m uma breve an√°lise (50-100 palavras) explicando como a distribui√ß√£o atende aos objetivos.

    Formato: Markdown com tabelas (use | para divis√£o)
    """
    response = modelo_texto.generate_content(prompt)
    return response.text

def gerar_previsao_resultados(params: Dict[str, Any], recomendacao_estrategica: str, distribuicao_budget: str) -> str:
    """Gera previs√£o de resultados baseada nos par√¢metros"""
    etapa_funil = params['etapa_funil']
    okrs_escolhidos = [k for k, v in params['metricas'].items() if v['selecionada']]
    metas_especificas = [f"{k}: {v['valor']}" for k, v in params['metricas'].items() if v['selecionada'] and v['valor']]

    prompt = f"""
    Com base na estrat√©gia para {etapa_funil} do funil:
    {recomendacao_estrategica}

    E na distribui√ß√£o de budget:
    {distribuicao_budget}

    Estime os resultados ESPERADOS considerando:
    - Budget total: R$ {params['budget']:,.2f}
    - Per√≠odo: {params['periodo']}
    - OKRs: {", ".join(okrs_escolhidos) if okrs_escolhidos else "A serem otimizados"}
    - Metas: {", ".join(metas_especificas) if metas_especificas else "Nenhuma espec√≠fica"}

    Forne√ßa:
    1. Tabela com m√©tricas ESPEC√çFICAS para os OKRs selecionados
    2. Estimativas realistas baseadas em benchmarks
    3. An√°lise de potencial desempenho (50-100 palavras)
    4. KPIs CHAVE para monitorar

    DICAS:
    - Destaque os OKRs selecionados: {", ".join(okrs_escolhidos) if okrs_escolhidos else "foco na etapa do funil"}
    - Considere as metas espec√≠ficas quando fornecidas
    - Use benchmarks realistas para o setor

    Formato: Markdown com tabelas
    """
    response = modelo_texto.generate_content(prompt)
    return response.text

def gerar_recomendacoes_publico(params: Dict[str, Any], recomendacao_estrategica: str) -> str:
    """Gera recomenda√ß√µes detalhadas de p√∫blico-alvo"""
    etapa_funil = params['etapa_funil']
    okrs_escolhidos = [k for k, v in params['metricas'].items() if v['selecionada']]

    prompt = f"""
    Para a campanha na etapa {etapa_funil} do funil com:
    - Tipo de P√∫blico: {params['tipo_publico']}
    - Objetivo: {params['objetivo_campanha']}
    - Plataformas: {", ".join(params['ferramentas'])}
    - Localiza√ß√µes: {params['localizacao_primaria']} (prim√°ria), {params['localizacao_secundaria']} (secund√°ria)
    - OKRs: {", ".join(okrs_escolhidos) if okrs_escolhidos else "A serem otimizados"}

    E considerando a estrat√©gia geral:
    {recomendacao_estrategica}

    Desenvolva recomenda√ß√µes de p√∫blico OTIMIZADAS PARA OS OBJETIVOS incluindo:
    1. Segmenta√ß√£o espec√≠fica para os OKRs selecionados
    2. Par√¢metros de targeting focados nos objetivos
    3. Estrat√©gias de expans√£o adequadas
    4. Considera√ß√µes sobre frequ√™ncia e satura√ß√£o

    REGRAS:
    - Manter foco absoluto nos estados especificados
    - Adaptar recomenda√ß√µes aos OKRs selecionados
    - Priorizar estrat√©gias adequadas para a etapa {etapa_funil}

    Formato: Markdown com listas e headers
    """
    response = modelo_texto.generate_content(prompt)
    return response.text

def gerar_cronograma(params: Dict[str, Any], recomendacao_estrategica: str, distribuicao_budget: str) -> str:
    """Gera cronograma de implementa√ß√£o"""
    etapa_funil = params['etapa_funil']
    okrs_escolhidos = [k for k, v in params['metricas'].items() if v['selecionada']]

    prompt = f"""
    Com base na estrat√©gia para {etapa_funil} do funil:
    {recomendacao_estrategica}

    E na distribui√ß√£o de budget:
    {distribuicao_budget}

    Crie um cronograma OTIMIZADO considerando:
    - Budget total: R$ {params['budget']:,.2f}
    - Per√≠odo: {params['periodo']}
    - Plataformas: {", ".join(params['ferramentas'])}
    - OKRs: {", ".join(okrs_escolhidos) if okrs_escolhidos else "A serem otimizados"}

    Inclua:
    1. Fases de implementa√ß√£o adequadas
    2. Distribui√ß√£o temporal do budget
    3. Marcos importantes
    4. Frequ√™ncia de ajustes recomendada

    DICAS:
    - Adaptar cronograma aos objetivos espec√≠ficos
    - N√£o incluir fases irrelevantes
    - Manter realismo no per√≠odo especificado

    Formato: Markdown com tabelas ou listas numeradas
    """
    response = modelo_texto.generate_content(prompt)
    return response.text

# Abas principais
tab1, tab2 = st.tabs(["üìã Criar Novo Plano", "üìä Exemplos por Etapa"])

with tab1:
    st.header("Informa√ß√µes do Plano de M√≠dia")
    
    with st.form("plano_midia_form"):
        col1, col2 = st.columns(2)
        
        with col1:
            objetivo_campanha = st.text_input(
                "Nome/Objetivo da Campanha*",
                placeholder="Ex: Campanha de Awareness - Marca X",
                value="Campanha de Awareness - Marca X"
            )
            
            tipo_campanha = st.selectbox(
                "Tipo de Campanha*",
                ["Alcance", "Engajamento", "Tr√°fego", "Convers√£o"],
                index=0
            )
            
            etapa_funil = st.selectbox(
                "Etapa do Funil*",
                ["Topo", "Meio", "Fundo"],
                index=0,
                help="Topo: Conscientiza√ß√£o | Meio: Considera√ß√£o | Fundo: Convers√£o"
            )
            
            budget = st.number_input(
                "Budget Total (R$)*",
                min_value=1000,
                value=100000,
                step=1000
            )
            
            periodo = st.selectbox(
                "Per√≠odo da Campanha*",
                ["1 m√™s", "2 meses", "3 meses", "6 meses", "1 ano"],
                index=0
            )
            
        with col2:
            ferramentas = st.multiselect(
                "Ferramentas/Plataformas*",
                ["Meta Ads (Facebook/Instagram)", "Google Ads", "TikTok", "LinkedIn", 
                 "YouTube", "M√≠dia Program√°tica", "Twitter", "Pinterest"],
                default=["Meta Ads (Facebook/Instagram)", "Google Ads"]
            )
            
            localizacao_primaria = st.text_input(
                "Localiza√ß√£o Prim√°ria (Estados)*",
                placeholder="Ex: MT, GO, RS",
                value="MT, GO, RS"
            )
            
            localizacao_secundaria = st.text_input(
                "Localiza√ß√£o Secund√°ria (Cidades)",
                placeholder="Ex: Rio de Janeiro, S√£o Paulo, Cuiab√°",
                value="Rio de Janeiro, S√£o Paulo, Cuiab√°"
            )
            
            tipo_publico = st.selectbox(
                "Tipo de P√∫blico*",
                ["Interesses", "Lookalike Audience (LAL)", "Base de Clientes", 
                 "Retargeting", "Comportamento", "Demogr√°fico"],
                index=0
            )
            
            tipo_criativo = st.multiselect(
                "Tipos de Criativo*",
                ["Est√°tico", "V√≠deo", "Carrossel", "Motion", "Story", "Cole√ß√£o"],
                default=["Est√°tico", "V√≠deo"]
            )
        
        st.markdown("**Selecione e defina metas para os OKRs relevantes:**")
        
        # Criar checkboxes e inputs para m√©tricas da etapa selecionada
        metricas = {}
        for metrica in METRICAS_POR_ETAPA[etapa_funil]:
            col1, col2 = st.columns([1, 3])
            with col1:
                selecionada = st.checkbox(metrica, value=True, key=f"check_{metrica}")
            with col2:
                valor = st.text_input(
                    f"Meta para {metrica}",
                    placeholder=f"Ex: 500.000 {metrica.split()[0]}" if " " in metrica else f"Ex: 500.000 {metrica}",
                    key=f"input_{metrica}",
                    disabled=not selecionada
                )
            metricas[metrica] = {
                'selecionada': selecionada,
                'valor': valor,
                'descricao': DESCRICOES_METRICAS.get(metrica, "")
            }
        
        detalhes_acao = st.text_area(
            "Detalhes da A√ß√£o*",
            placeholder="Descreva o produto/servi√ßo/evento que ser√° promovido",
            value="Campanha de produtos agr√≠colas para pequenos e m√©dios produtores"
        )
        
        observacoes = st.text_area(
            "Observa√ß√µes Adicionais",
            placeholder="Informa√ß√µes extras sobre a campanha, concorrentes, etc."
        )
        
        submitted = st.form_submit_button("Gerar Plano de M√≠dia")
    
    if submitted:
        if not objetivo_campanha or not tipo_campanha or not budget or not ferramentas or not localizacao_primaria or not detalhes_acao:
            st.error("Por favor, preencha todos os campos obrigat√≥rios (*)")
        else:
            # Armazenar par√¢metros na sess√£o
            params = {
                'objetivo_campanha': objetivo_campanha,
                'tipo_campanha': tipo_campanha,
                'etapa_funil': etapa_funil,
                'budget': budget,
                'periodo': periodo,
                'ferramentas': ferramentas,
                'localizacao_primaria': localizacao_primaria,
                'localizacao_secundaria': localizacao_secundaria,
                'tipo_publico': tipo_publico,
                'tipo_criativo': tipo_criativo,
                'metricas': metricas,
                'detalhes_acao': detalhes_acao,
                'observacoes': observacoes
            }
            
            st.session_state.current_step = 1
            st.session_state.params = params
            
            # Gerar todo o conte√∫do de uma vez
            with st.spinner(f'Gerando plano completo para {etapa_funil} do funil...'):
                st.session_state.plano_completo['recomendacao_estrategica'] = gerar_recomendacao_estrategica(params)
                st.session_state.plano_completo['distribuicao_budget'] = gerar_distribuicao_budget(params, st.session_state.plano_completo['recomendacao_estrategica'])
                st.session_state.plano_completo['previsao_resultados'] = gerar_previsao_resultados(params, st.session_state.plano_completo['recomendacao_estrategica'], st.session_state.plano_completo['distribuicao_budget'])
                st.session_state.plano_completo['recomendacoes_publico'] = gerar_recomendacoes_publico(params, st.session_state.plano_completo['recomendacao_estrategica'])
                st.session_state.plano_completo['cronograma'] = gerar_cronograma(params, st.session_state.plano_completo['recomendacao_estrategica'], st.session_state.plano_completo['distribuicao_budget'])
    
    # Exibir resultados
    if st.session_state.current_step >= 1 and 'params' in st.session_state:
        etapa_funil = st.session_state.params.get('etapa_funil', 'Topo')
        st.success(f"**Etapa do Funil Selecionada:** {etapa_funil}")
        
        # Verificar se 'metricas' existe nos par√¢metros
        if 'metricas' in st.session_state.params:
            okrs_selecionados = [k for k, v in st.session_state.params['metricas'].items() if v['selecionada']]
            metas_definidas = [f"{k}: {v['valor']}" for k, v in st.session_state.params['metricas'].items() if v['selecionada'] and v['valor']]
            
            if okrs_selecionados:
                st.info(f"**OKRs Selecionados:** {', '.join(okrs_selecionados)}")
            if metas_definidas:
                st.info(f"**Metas Definidas:** {', '.join(metas_definidas)}")
        else:
            st.warning("Nenhuma m√©trica foi configurada ainda.")
        
        st.markdown("## üìå Recomenda√ß√£o Estrat√©gica")
        st.markdown(st.session_state.plano_completo.get('recomendacao_estrategica', 'Em processamento...'))
        
        st.markdown("## üìä Distribui√ß√£o de Budget")
        st.markdown(st.session_state.plano_completo.get('distribuicao_budget', 'Em processamento...'))
        
        st.markdown("## üìà Previs√£o de Resultados")
        st.markdown(st.session_state.plano_completo.get('previsao_resultados', 'Em processamento...'))
        
        st.markdown("## üéØ Recomenda√ß√µes de P√∫blico")
        st.markdown(st.session_state.plano_completo.get('recomendacoes_publico', 'Em processamento...'))
        
        st.markdown("## üìÖ Cronograma Sugerido")
        st.markdown(st.session_state.plano_completo.get('cronograma', 'Em processamento...'))
        
        # Bot√£o para baixar o plano completo
        if all(key in st.session_state.plano_completo for key in ['recomendacao_estrategica', 'distribuicao_budget', 'previsao_resultados', 'recomendacoes_publico', 'cronograma']):
            plano_completo = "\n\n".join([
                f"# üìä Plano de M√≠dia Completo ({etapa_funil} do Funil)\n",
                f"**Campanha:** {st.session_state.params['objetivo_campanha']}",
                f"**Budget:** R$ {st.session_state.params['budget']:,.2f}",
                f"**Per√≠odo:** {st.session_state.params['periodo']}",
                f"**OKRs Selecionados:** {', '.join(okrs_selecionados) if okrs_selecionados else 'A serem otimizados'}",
                f"**Metas Definidas:** {', '.join(metas_definidas) if metas_definidas else 'Nenhuma espec√≠fica'}\n",
                "## üìå Recomenda√ß√£o Estrat√©gica",
                st.session_state.plano_completo['recomendacao_estrategica'],
                "## üìä Distribui√ß√£o de Budget",
                st.session_state.plano_completo['distribuicao_budget'],
                "## üìà Previs√£o de Resultados",
                st.session_state.plano_completo['previsao_resultados'],
                "## üéØ Recomenda√ß√µes de P√∫blico",
                st.session_state.plano_completo['recomendacoes_publico'],
                "## üìÖ Cronograma Sugerido",
                st.session_state.plano_completo['cronograma']
            ])
            
            st.download_button(
                label="üì• Baixar Plano Completo",
                data=plano_completo,
                file_name=f"plano_midia_{etapa_funil}_{st.session_state.params['objetivo_campanha'][:30]}.md",
                mime="text/markdown"
            )

with tab2:
    st.header("Exemplos por Etapa do Funil")
    
    tab_topo, tab_meio, tab_fundo = st.tabs(["Topo", "Meio", "Fundo"])
    
    with tab_topo:
        st.markdown("""
        ### üìã Exemplo - Topo do Funil (Awareness)
        **Campanha:** Conscientiza√ß√£o da Marca X  
        **Objetivo:** Aumentar reconhecimento de marca  
        **Etapa do Funil:** Topo  
        **OKRs T√≠picos:** Impress√µes, Alcance, Frequ√™ncia, CPM  
        """)
        
        st.markdown("""
        #### üéØ Metas Recomendadas:
        - Impress√µes: 5.000.000
        - Alcance: 2.200.000
        - Frequ√™ncia m√©dia: 2.3
        - CPM: R$ 15-20
        
        #### üìä Aloca√ß√£o Recomendada:
        | Plataforma | % Budget | Valor (R$) | Criativos Principais |
        |------------|----------|------------|----------------------|
        | Meta Ads | 50% | 75.000 | V√≠deo (60%), Est√°tico (40%) |
        | YouTube | 30% | 45.000 | V√≠deo (100%) |
        | Program√°tica | 20% | 30.000 | Banner (70%), V√≠deo (30%) |
        """)
    
    with tab_meio:
        st.markdown("""
        ### üìã Exemplo - Meio do Funil (Considera√ß√£o)
        **Campanha:** Engajamento Produto Y  
        **Objetivo:** Gerar interesse no produto  
        **Etapa do Funil:** Meio  
        **OKRs T√≠picos:** CTR, Video Views, Engajamento  
        """)
        
        st.markdown("""
        #### üéØ Metas Recomendadas:
        - CTR: 1.8-2.5%
        - Video Views: 500.000
        - Engajamento: 3.5%
        
        #### üìä Aloca√ß√£o Recomendada:
        | Plataforma | % Budget | Valor (R$) | Criativos Principais |
        |------------|----------|------------|----------------------|
        | Meta Ads | 40% | 32.000 | Carrossel (50%), V√≠deo (50%) |
        | LinkedIn | 30% | 24.000 | Est√°tico (70%), V√≠deo (30%) |
        | Google Ads | 30% | 24.000 | Display (60%), V√≠deo (40%) |
        """)
    
    with tab_fundo:
        st.markdown("""
        ### üìã Exemplo - Fundo do Funil (Convers√£o)
        **Campanha:** Vendas Produto Z  
        **Objetivo:** Gerar vendas diretas  
        **Etapa do Funil:** Fundo  
        **OKRs T√≠picos:** Convers√µes, ROAS, CPA  
        """)
        
        st.markdown("""
        #### üéØ Metas Recomendadas:
        - Convers√µes: 1.500
        - ROAS: 3.5x
        - CPA: R$ 80-100
        
        #### üìä Aloca√ß√£o Recomendada:
        | Plataforma | % Budget | Valor (R$) | Criativos Principais |
        |------------|----------|------------|----------------------|
        | Meta Ads | 60% | 72.000 | Cole√ß√£o (70%), Est√°tico (30%) |
        | Google Ads | 40% | 48.000 | Shopping (100%) |
        """)

# Rodap√©
st.markdown("---")
st.caption("""
Ferramenta de IA para Planejamento de M√≠dia - Otimize suas campanhas com aloca√ß√£o inteligente de budget por etapa do funil.
""")
